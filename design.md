# Design

## Generational Application State
The only things you need to communicate with a server - in practice - are slightly modified XML and URL parsers.

Example diagram written from perspective of the client:

| Stage | RX                                                                                   | TX                                                                   | Comment                                                                                                                                       |
| ----- | ------------------------------------------------------------------------------------ | -------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| -1    |                                                                                      | `<get />`                                                            | Client attempts to load `trax.tcp:example.com`                                                                                                |
| 0     | `<redirect url="todo.trax">`                                                         |                                                                      | Server redirects the client to the initial document located at `trax.tcp:example.com/todo.trax`                                               |
| 1     | -                                                                                    | `<get doc="todo.trax" />`                                            | Client requests initial document (see [todo.trax](doc/todo.trax))                                                                             |
| 2     | `<insert target="todo.trax"> (contents of todo.trax) </insert>`                      | -                                                                    | Server sends file contents                                                                                                                    |
| 3     | `<insert path="todo.trax/Frame/Body" start> (contents of todo_todos.trax) </insert>` | -                                                                    | Server sends a command to insert elements into the Body. For this example it's the initial todos (see [todo_todos.trax](doc/todo_todos.trax)) |
| 4     | -                                                                                    | `<insertProp target="todo.trax/Frame/Body/Todo#1" key="done" end />` | Client checks the "done" checkbox, which updates the server with the new `done` modifier bound to it                                          |
| 5     | `<insert path="todo.trax/Frame/Body/Todo#1" />`                                      | -                                                                    | Server sends a command to delete the 2nd Todo element                                                                                         |